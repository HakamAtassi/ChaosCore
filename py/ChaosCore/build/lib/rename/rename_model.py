
class rename_model:
    def __init__(self):
        self.active_checkpoint = 0

        self.RAT_memories   = [[0]*64 for _ in range(self.checkpoints)]
        self.ready_memories = [[0]*64 for _ in range(self.checkpoints)]
        self.free_list      = [i for i in range(1, 64)]


        self.renamed_decoded_fetch_packet_queue = []


    def inputs(self, flush, restore_checkpoint_value, create_checkpoint, free_checkpoint, decoded_fetch_packet, renamed_decoded_fetch_packet, FU_outputs):
        self.input_flush = flush
        self.input_restore_checkpoint_value = restore_checkpoint_value
        self.input_create_checkpoint = create_checkpoint
        self.input_free_checkpoint = free_checkpoint
        self.input_decoded_fetch_packet = decoded_fetch_packet
        self.input_renamed_decoded_fetch_packet = renamed_decoded_fetch_packet
        self.FU_outputs = FU_outputs

    def get_is_branch(self):
        is_branch = 0
        for i in range(4):
            is_branch = is_branch | int(self.input_decoded_fetch_packet["needs_branch_unit"][i])
        return is_branch

    def create_checkpoint(self):
        pass

    def eval(self):
        is_branch = self.get_is_branch()

        if is_branch:
            self.create_checkpoint()





        pass


    


                #io_flush,
                #io_restore_checkpoint,
  #input  [3:0]  io_restore_checkpoint_value,
  #input         io_create_checkpoint,
                #io_free_checkpoint,
  #output        io_decoded_fetch_packet_ready,
  #input         io_decoded_fetch_packet_valid,
  #input  [31:0] io_decoded_fetch_packet_bits_fetch_PC,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_0_ready_bits_RS1_ready,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_ready_bits_RS2_ready,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_RD,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_0_RD_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_RS1,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_0_RS1_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_RS2,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_0_RS2_valid,
  #input  [20:0] io_decoded_fetch_packet_bits_decoded_instruction_0_IMM,
  #input  [2:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_FUNCT3,
  #input  [3:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_packet_index,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_ROB_index,
  #input  [4:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_instructionType,
  #input  [1:0]  io_decoded_fetch_packet_bits_decoded_instruction_0_portID,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_RS_type,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_0_needs_ALU,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_needs_branch_unit,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_needs_CSRs,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_SUBTRACT,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_MULTIPLY,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_IS_IMM,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_is_load,
                #io_decoded_fetch_packet_bits_decoded_instruction_0_is_store,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_ready_bits_RS1_ready,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_ready_bits_RS2_ready,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_RD,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_1_RD_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_RS1,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_1_RS1_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_RS2,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_1_RS2_valid,
  #input  [20:0] io_decoded_fetch_packet_bits_decoded_instruction_1_IMM,
  #input  [2:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_FUNCT3,
  #input  [3:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_packet_index,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_ROB_index,
  #input  [4:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_instructionType,
  #input  [1:0]  io_decoded_fetch_packet_bits_decoded_instruction_1_portID,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_RS_type,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_1_needs_ALU,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_needs_branch_unit,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_needs_CSRs,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_SUBTRACT,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_MULTIPLY,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_IS_IMM,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_is_load,
                #io_decoded_fetch_packet_bits_decoded_instruction_1_is_store,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_ready_bits_RS1_ready,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_ready_bits_RS2_ready,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_RD,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_2_RD_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_RS1,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_2_RS1_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_RS2,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_2_RS2_valid,
  #input  [20:0] io_decoded_fetch_packet_bits_decoded_instruction_2_IMM,
  #input  [2:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_FUNCT3,
  #input  [3:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_packet_index,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_ROB_index,
  #input  [4:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_instructionType,
  #input  [1:0]  io_decoded_fetch_packet_bits_decoded_instruction_2_portID,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_RS_type,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_2_needs_ALU,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_needs_branch_unit,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_needs_CSRs,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_SUBTRACT,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_MULTIPLY,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_IS_IMM,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_is_load,
                #io_decoded_fetch_packet_bits_decoded_instruction_2_is_store,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_ready_bits_RS1_ready,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_ready_bits_RS2_ready,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_RD,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_3_RD_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_RS1,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_3_RS1_valid,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_RS2,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_3_RS2_valid,
  #input  [20:0] io_decoded_fetch_packet_bits_decoded_instruction_3_IMM,
  #input  [2:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_FUNCT3,
  #input  [3:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_packet_index,
  #input  [5:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_ROB_index,
  #input  [4:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_instructionType,
  #input  [1:0]  io_decoded_fetch_packet_bits_decoded_instruction_3_portID,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_RS_type,
  #input         io_decoded_fetch_packet_bits_decoded_instruction_3_needs_ALU,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_needs_branch_unit,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_needs_CSRs,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_SUBTRACT,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_MULTIPLY,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_IS_IMM,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_is_load,
                #io_decoded_fetch_packet_bits_decoded_instruction_3_is_store,
                #io_decoded_fetch_packet_bits_valid_bits_0,
                #io_decoded_fetch_packet_bits_valid_bits_1,
                #io_decoded_fetch_packet_bits_valid_bits_2,
                #io_decoded_fetch_packet_bits_valid_bits_3,
  #input  [3:0]  io_decoded_fetch_packet_bits_RAT_index,
  #input         io_renamed_decoded_fetch_packet_ready,
  #output        io_renamed_decoded_fetch_packet_valid,
  #output [31:0] io_renamed_decoded_fetch_packet_bits_fetch_PC,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_ready_bits_RS1_ready,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_ready_bits_RS2_ready,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RD,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RD_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RS1,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RS1_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RS2,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RS2_valid,
  #output [20:0] io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_IMM,
  #output [2:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_FUNCT3,
  #output [3:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_packet_index,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_ROB_index,
  #output [4:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_instructionType,
  #output [1:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_portID,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_RS_type,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_needs_ALU,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_needs_branch_unit,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_needs_CSRs,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_SUBTRACT,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_MULTIPLY,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_IS_IMM,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_is_load,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_0_is_store,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_ready_bits_RS1_ready,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_ready_bits_RS2_ready,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RD,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RD_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RS1,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RS1_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RS2,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RS2_valid,
  #output [20:0] io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_IMM,
  #output [2:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_FUNCT3,
  #output [3:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_packet_index,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_ROB_index,
  #output [4:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_instructionType,
  #output [1:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_portID,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_RS_type,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_needs_ALU,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_needs_branch_unit,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_needs_CSRs,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_SUBTRACT,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_MULTIPLY,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_IS_IMM,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_is_load,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_1_is_store,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_ready_bits_RS1_ready,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_ready_bits_RS2_ready,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RD,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RD_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RS1,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RS1_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RS2,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RS2_valid,
  #output [20:0] io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_IMM,
  #output [2:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_FUNCT3,
  #output [3:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_packet_index,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_ROB_index,
  #output [4:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_instructionType,
  #output [1:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_portID,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_RS_type,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_needs_ALU,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_needs_branch_unit,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_needs_CSRs,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_SUBTRACT,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_MULTIPLY,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_IS_IMM,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_is_load,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_2_is_store,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_ready_bits_RS1_ready,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_ready_bits_RS2_ready,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RD,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RD_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RS1,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RS1_valid,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RS2,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RS2_valid,
  #output [20:0] io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_IMM,
  #output [2:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_FUNCT3,
  #output [3:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_packet_index,
  #output [5:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_ROB_index,
  #output [4:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_instructionType,
  #output [1:0]  io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_portID,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_RS_type,
  #output        io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_needs_ALU,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_needs_branch_unit,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_needs_CSRs,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_SUBTRACT,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_MULTIPLY,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_IS_IMM,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_is_load,
                #io_renamed_decoded_fetch_packet_bits_decoded_instruction_3_is_store,
                #io_renamed_decoded_fetch_packet_bits_valid_bits_0,
                #io_renamed_decoded_fetch_packet_bits_valid_bits_1,
                #io_renamed_decoded_fetch_packet_bits_valid_bits_2,
                #io_renamed_decoded_fetch_packet_bits_valid_bits_3,
  #output [3:0]  io_renamed_decoded_fetch_packet_bits_RAT_index,
  #input         io_FU_outputs_0_valid,
  #input  [5:0]  io_FU_outputs_0_bits_RD,
  #input  [31:0] io_FU_outputs_0_bits_RD_data,
  #input         io_FU_outputs_0_bits_RD_valid,
  #input  [31:0] io_FU_outputs_0_bits_fetch_PC,
  #input         io_FU_outputs_0_bits_branch_taken,
  #input  [31:0] io_FU_outputs_0_bits_target_address,
  #input         io_FU_outputs_0_bits_branch_valid,
  #input  [5:0]  io_FU_outputs_0_bits_ROB_index,
  #input  [1:0]  io_FU_outputs_0_bits_fetch_packet_index,
  #input         io_FU_outputs_1_valid,
  #input  [5:0]  io_FU_outputs_1_bits_RD,
  #input  [31:0] io_FU_outputs_1_bits_RD_data,
  #input         io_FU_outputs_1_bits_RD_valid,
  #input  [31:0] io_FU_outputs_1_bits_fetch_PC,
  #input         io_FU_outputs_1_bits_branch_taken,
  #input  [31:0] io_FU_outputs_1_bits_target_address,
  #input         io_FU_outputs_1_bits_branch_valid,
  #input  [5:0]  io_FU_outputs_1_bits_ROB_index,
  #input  [1:0]  io_FU_outputs_1_bits_fetch_packet_index,
  #input         io_FU_outputs_2_valid,
  #input  [5:0]  io_FU_outputs_2_bits_RD,
  #input  [31:0] io_FU_outputs_2_bits_RD_data,
  #input         io_FU_outputs_2_bits_RD_valid,
  #input  [31:0] io_FU_outputs_2_bits_fetch_PC,
  #input         io_FU_outputs_2_bits_branch_taken,
  #input  [31:0] io_FU_outputs_2_bits_target_address,
  #input         io_FU_outputs_2_bits_branch_valid,
  #input  [5:0]  io_FU_outputs_2_bits_ROB_index,
  #input  [1:0]  io_FU_outputs_2_bits_fetch_packet_index,
  #input         io_FU_outputs_3_valid,
  #input  [5:0]  io_FU_outputs_3_bits_RD,
  #input  [31:0] io_FU_outputs_3_bits_RD_data,
  #input         io_FU_outputs_3_bits_RD_valid,
  #input  [31:0] io_FU_outputs_3_bits_fetch_PC,
  #input         io_FU_outputs_3_bits_branch_taken,
  #input  [31:0] io_FU_outputs_3_bits_target_address,
  #input         io_FU_outputs_3_bits_branch_valid,
  #input  [5:0]  io_FU_outputs_3_bits_ROB_index,
  #input  [1:0]  io_FU_outputs_3_bits_fetch_packet_index