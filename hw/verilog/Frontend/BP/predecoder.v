// Generated by CIRCT firtool-1.62.0
// Standard header to adapt well known macros for prints and assertions.

// Users can define 'ASSERT_VERBOSE_COND' to add an extra gate to assert error printing.
`ifndef ASSERT_VERBOSE_COND_
  `ifdef ASSERT_VERBOSE_COND
    `define ASSERT_VERBOSE_COND_ (`ASSERT_VERBOSE_COND)
  `else  // ASSERT_VERBOSE_COND
    `define ASSERT_VERBOSE_COND_ 1
  `endif // ASSERT_VERBOSE_COND
`endif // not def ASSERT_VERBOSE_COND_

// Users can define 'STOP_COND' to add an extra gate to stop conditions.
`ifndef STOP_COND_
  `ifdef STOP_COND
    `define STOP_COND_ (`STOP_COND)
  `else  // STOP_COND
    `define STOP_COND_ 1
  `endif // STOP_COND
`endif // not def STOP_COND_

module branch_decoder(
  input         clock,
                reset,
  input  [31:0] io_fetch_PC,
                io_instruction,
  input         io_valid,
                io_prediction_bits_hit,
  input  [31:0] io_prediction_bits_target,
  input  [3:0]  io_prediction_bits_br_mask,
  input         io_prediction_bits_T_NT,
  input  [31:0] io_RAS_read_ret_addr,
  output        io_T_NT,
  output [2:0]  io_metadata_br_type,
  output [31:0] io_metadata_Imm,
                io_metadata_instruction_PC,
                io_metadata_RAS,
                io_metadata_BTB_target
);

  wire        BR = io_instruction[6:2] == 5'h18;
  wire        JALR = io_instruction[6:2] == 5'h19;
  wire        JAL = io_instruction[6:2] == 5'h1B;
  wire [31:0] imm =
    io_instruction[6:0] == 7'h63
      ? {19'h0,
         io_instruction[31],
         io_instruction[7],
         io_instruction[30:25],
         io_instruction[11:8],
         1'h0}
      : io_instruction[6:0] == 7'h6F
          ? {11'h0,
             io_instruction[31],
             io_instruction[19:12],
             io_instruction[20],
             io_instruction[30:21],
             1'h0}
          : io_instruction[6:0] == 7'h13 | io_instruction[6:0] == 7'h3
            | io_instruction[6:0] == 7'h67
              ? {20'h0, io_instruction[31:20]}
              : io_instruction[6:0] == 7'h23
                  ? {20'h0, io_instruction[31:25], io_instruction[11:7]}
                  : io_instruction[6:0] == 7'h33 ? {io_instruction[31:12], 12'h0} : 32'h0;
  wire        _RET_T_2 = io_instruction[19:15] == 5'h1;
  wire        CALL = JALR & io_instruction[11:7] == 5'h1 & _RET_T_2;
  wire        RET = JALR & io_instruction[11:7] == 5'h0 & _RET_T_2 & imm == 32'h0;
  `ifndef SYNTHESIS
    always @(posedge clock) begin
      if (~reset & CALL & RET) begin
        if (`ASSERT_VERBOSE_COND_)
          $error("Assertion failed: Cant have call and ret both be valid\n    at branch_decoder.scala:78 assert(!(CALL && RET), \"Cant have call and ret both be valid\")\n");
        if (`STOP_COND_)
          $fatal;
      end
    end // always @(posedge)
  `endif // not def SYNTHESIS
  assign io_T_NT =
    JAL
      ? io_valid
      : JALR
          ? io_valid & (RET | io_prediction_bits_hit & io_prediction_bits_br_mask[0])
          : BR & io_valid & io_prediction_bits_T_NT;
  assign io_metadata_br_type =
    CALL ? 3'h5 : RET ? 3'h4 : JAL ? 3'h2 : JALR ? 3'h3 : {2'h0, BR};
  assign io_metadata_Imm = imm;
  assign io_metadata_instruction_PC = io_fetch_PC;
  assign io_metadata_RAS = io_RAS_read_ret_addr;
  assign io_metadata_BTB_target = io_prediction_bits_target;
endmodule

module branch_decoder_1(
  input         clock,
                reset,
  input  [31:0] io_fetch_PC,
                io_instruction,
  input         io_valid,
                io_prediction_bits_hit,
  input  [31:0] io_prediction_bits_target,
  input  [3:0]  io_prediction_bits_br_mask,
  input         io_prediction_bits_T_NT,
  input  [31:0] io_RAS_read_ret_addr,
  output        io_T_NT,
  output [2:0]  io_metadata_br_type,
  output [31:0] io_metadata_Imm,
                io_metadata_instruction_PC,
                io_metadata_RAS,
                io_metadata_BTB_target
);

  wire        BR = io_instruction[6:2] == 5'h18;
  wire        JALR = io_instruction[6:2] == 5'h19;
  wire        JAL = io_instruction[6:2] == 5'h1B;
  wire [31:0] imm =
    io_instruction[6:0] == 7'h63
      ? {19'h0,
         io_instruction[31],
         io_instruction[7],
         io_instruction[30:25],
         io_instruction[11:8],
         1'h0}
      : io_instruction[6:0] == 7'h6F
          ? {11'h0,
             io_instruction[31],
             io_instruction[19:12],
             io_instruction[20],
             io_instruction[30:21],
             1'h0}
          : io_instruction[6:0] == 7'h13 | io_instruction[6:0] == 7'h3
            | io_instruction[6:0] == 7'h67
              ? {20'h0, io_instruction[31:20]}
              : io_instruction[6:0] == 7'h23
                  ? {20'h0, io_instruction[31:25], io_instruction[11:7]}
                  : io_instruction[6:0] == 7'h33 ? {io_instruction[31:12], 12'h0} : 32'h0;
  wire        _RET_T_2 = io_instruction[19:15] == 5'h1;
  wire        CALL = JALR & io_instruction[11:7] == 5'h1 & _RET_T_2;
  wire        RET = JALR & io_instruction[11:7] == 5'h0 & _RET_T_2 & imm == 32'h0;
  `ifndef SYNTHESIS
    always @(posedge clock) begin
      if (~reset & CALL & RET) begin
        if (`ASSERT_VERBOSE_COND_)
          $error("Assertion failed: Cant have call and ret both be valid\n    at branch_decoder.scala:78 assert(!(CALL && RET), \"Cant have call and ret both be valid\")\n");
        if (`STOP_COND_)
          $fatal;
      end
    end // always @(posedge)
  `endif // not def SYNTHESIS
  assign io_T_NT =
    JAL
      ? io_valid
      : JALR
          ? io_valid & (RET | io_prediction_bits_hit & io_prediction_bits_br_mask[1])
          : BR & io_valid & io_prediction_bits_T_NT;
  assign io_metadata_br_type =
    CALL ? 3'h5 : RET ? 3'h4 : JAL ? 3'h2 : JALR ? 3'h3 : {2'h0, BR};
  assign io_metadata_Imm = imm;
  assign io_metadata_instruction_PC = io_fetch_PC + 32'h4;
  assign io_metadata_RAS = io_RAS_read_ret_addr;
  assign io_metadata_BTB_target = io_prediction_bits_target;
endmodule

module branch_decoder_2(
  input         clock,
                reset,
  input  [31:0] io_fetch_PC,
                io_instruction,
  input         io_valid,
                io_prediction_bits_hit,
  input  [31:0] io_prediction_bits_target,
  input  [3:0]  io_prediction_bits_br_mask,
  input         io_prediction_bits_T_NT,
  input  [31:0] io_RAS_read_ret_addr,
  output        io_T_NT,
  output [2:0]  io_metadata_br_type,
  output [31:0] io_metadata_Imm,
                io_metadata_instruction_PC,
                io_metadata_RAS,
                io_metadata_BTB_target
);

  wire        BR = io_instruction[6:2] == 5'h18;
  wire        JALR = io_instruction[6:2] == 5'h19;
  wire        JAL = io_instruction[6:2] == 5'h1B;
  wire [31:0] imm =
    io_instruction[6:0] == 7'h63
      ? {19'h0,
         io_instruction[31],
         io_instruction[7],
         io_instruction[30:25],
         io_instruction[11:8],
         1'h0}
      : io_instruction[6:0] == 7'h6F
          ? {11'h0,
             io_instruction[31],
             io_instruction[19:12],
             io_instruction[20],
             io_instruction[30:21],
             1'h0}
          : io_instruction[6:0] == 7'h13 | io_instruction[6:0] == 7'h3
            | io_instruction[6:0] == 7'h67
              ? {20'h0, io_instruction[31:20]}
              : io_instruction[6:0] == 7'h23
                  ? {20'h0, io_instruction[31:25], io_instruction[11:7]}
                  : io_instruction[6:0] == 7'h33 ? {io_instruction[31:12], 12'h0} : 32'h0;
  wire        _RET_T_2 = io_instruction[19:15] == 5'h1;
  wire        CALL = JALR & io_instruction[11:7] == 5'h1 & _RET_T_2;
  wire        RET = JALR & io_instruction[11:7] == 5'h0 & _RET_T_2 & imm == 32'h0;
  `ifndef SYNTHESIS
    always @(posedge clock) begin
      if (~reset & CALL & RET) begin
        if (`ASSERT_VERBOSE_COND_)
          $error("Assertion failed: Cant have call and ret both be valid\n    at branch_decoder.scala:78 assert(!(CALL && RET), \"Cant have call and ret both be valid\")\n");
        if (`STOP_COND_)
          $fatal;
      end
    end // always @(posedge)
  `endif // not def SYNTHESIS
  assign io_T_NT =
    JAL
      ? io_valid
      : JALR
          ? io_valid & (RET | io_prediction_bits_hit & io_prediction_bits_br_mask[2])
          : BR & io_valid & io_prediction_bits_T_NT;
  assign io_metadata_br_type =
    CALL ? 3'h5 : RET ? 3'h4 : JAL ? 3'h2 : JALR ? 3'h3 : {2'h0, BR};
  assign io_metadata_Imm = imm;
  assign io_metadata_instruction_PC = io_fetch_PC + 32'h8;
  assign io_metadata_RAS = io_RAS_read_ret_addr;
  assign io_metadata_BTB_target = io_prediction_bits_target;
endmodule

module branch_decoder_3(
  input         clock,
                reset,
  input  [31:0] io_fetch_PC,
                io_instruction,
  input         io_valid,
                io_prediction_bits_hit,
  input  [31:0] io_prediction_bits_target,
  input  [3:0]  io_prediction_bits_br_mask,
  input         io_prediction_bits_T_NT,
  input  [31:0] io_RAS_read_ret_addr,
  output        io_T_NT,
  output [2:0]  io_metadata_br_type,
  output [31:0] io_metadata_Imm,
                io_metadata_instruction_PC,
                io_metadata_RAS,
                io_metadata_BTB_target
);

  wire        BR = io_instruction[6:2] == 5'h18;
  wire        JALR = io_instruction[6:2] == 5'h19;
  wire        JAL = io_instruction[6:2] == 5'h1B;
  wire [31:0] imm =
    io_instruction[6:0] == 7'h63
      ? {19'h0,
         io_instruction[31],
         io_instruction[7],
         io_instruction[30:25],
         io_instruction[11:8],
         1'h0}
      : io_instruction[6:0] == 7'h6F
          ? {11'h0,
             io_instruction[31],
             io_instruction[19:12],
             io_instruction[20],
             io_instruction[30:21],
             1'h0}
          : io_instruction[6:0] == 7'h13 | io_instruction[6:0] == 7'h3
            | io_instruction[6:0] == 7'h67
              ? {20'h0, io_instruction[31:20]}
              : io_instruction[6:0] == 7'h23
                  ? {20'h0, io_instruction[31:25], io_instruction[11:7]}
                  : io_instruction[6:0] == 7'h33 ? {io_instruction[31:12], 12'h0} : 32'h0;
  wire        _RET_T_2 = io_instruction[19:15] == 5'h1;
  wire        CALL = JALR & io_instruction[11:7] == 5'h1 & _RET_T_2;
  wire        RET = JALR & io_instruction[11:7] == 5'h0 & _RET_T_2 & imm == 32'h0;
  `ifndef SYNTHESIS
    always @(posedge clock) begin
      if (~reset & CALL & RET) begin
        if (`ASSERT_VERBOSE_COND_)
          $error("Assertion failed: Cant have call and ret both be valid\n    at branch_decoder.scala:78 assert(!(CALL && RET), \"Cant have call and ret both be valid\")\n");
        if (`STOP_COND_)
          $fatal;
      end
    end // always @(posedge)
  `endif // not def SYNTHESIS
  assign io_T_NT =
    JAL
      ? io_valid
      : JALR
          ? io_valid & (RET | io_prediction_bits_hit & io_prediction_bits_br_mask[3])
          : BR & io_valid & io_prediction_bits_T_NT;
  assign io_metadata_br_type =
    CALL ? 3'h5 : RET ? 3'h4 : JAL ? 3'h2 : JALR ? 3'h3 : {2'h0, BR};
  assign io_metadata_Imm = imm;
  assign io_metadata_instruction_PC = io_fetch_PC + 32'hC;
  assign io_metadata_RAS = io_RAS_read_ret_addr;
  assign io_metadata_BTB_target = io_prediction_bits_target;
endmodule

module decoder_validator(
  input  [3:0] io_instruction_T_NT_mask,
  output [3:0] io_instruction_validity
);

  wire [3:0][3:0] _GEN = '{4'hF, 4'h7, 4'h3, 4'h1};
  assign io_instruction_validity =
    _GEN[io_instruction_T_NT_mask[0]
           ? 2'h0
           : io_instruction_T_NT_mask[1] ? 2'h1 : {1'h1, ~(io_instruction_T_NT_mask[2])}];
endmodule

module predecoder(
  input         clock,
                reset,
  output        io_prediction_ready,
  input         io_prediction_valid,
                io_prediction_bits_hit,
  input  [31:0] io_prediction_bits_target,
  input  [2:0]  io_prediction_bits_br_type,
  input  [3:0]  io_prediction_bits_br_mask,
  input  [15:0] io_prediction_bits_GHR,
  input         io_prediction_bits_T_NT,
  output        io_fetch_packet_ready,
  input         io_fetch_packet_valid,
  input  [31:0] io_fetch_packet_bits_fetch_PC,
  input         io_fetch_packet_bits_valid_bits_0,
                io_fetch_packet_bits_valid_bits_1,
                io_fetch_packet_bits_valid_bits_2,
                io_fetch_packet_bits_valid_bits_3,
  input  [31:0] io_fetch_packet_bits_instructions_0_instruction,
  input  [3:0]  io_fetch_packet_bits_instructions_0_packet_index,
  input  [5:0]  io_fetch_packet_bits_instructions_0_ROB_index,
  input  [31:0] io_fetch_packet_bits_instructions_1_instruction,
  input  [3:0]  io_fetch_packet_bits_instructions_1_packet_index,
  input  [5:0]  io_fetch_packet_bits_instructions_1_ROB_index,
  input  [31:0] io_fetch_packet_bits_instructions_2_instruction,
  input  [3:0]  io_fetch_packet_bits_instructions_2_packet_index,
  input  [5:0]  io_fetch_packet_bits_instructions_2_ROB_index,
  input  [31:0] io_fetch_packet_bits_instructions_3_instruction,
  input  [3:0]  io_fetch_packet_bits_instructions_3_packet_index,
  input  [5:0]  io_fetch_packet_bits_instructions_3_ROB_index,
  input  [6:0]  io_RAS_read_NEXT,
                io_RAS_read_TOS,
  input  [31:0] io_RAS_read_ret_addr,
  input         io_commit_valid,
  input  [31:0] io_commit_fetch_PC,
  input         io_commit_T_NT,
  input  [2:0]  io_commit_br_type,
  input  [1:0]  io_commit_fetch_packet_index,
  input         io_commit_is_misprediction,
  input  [31:0] io_commit_expected_PC,
  input  [15:0] io_commit_GHR,
  input  [6:0]  io_commit_TOS,
                io_commit_NEXT,
  input  [3:0]  io_commit_RAT_IDX,
  input         io_revert_ready,
  output        io_revert_valid,
  output [15:0] io_revert_bits_GHR,
  output [31:0] io_revert_bits_PC,
  output [15:0] io_GHR,
  input         io_final_fetch_packet_ready,
  output        io_final_fetch_packet_valid,
  output [31:0] io_final_fetch_packet_bits_fetch_PC,
  output        io_final_fetch_packet_bits_valid_bits_0,
                io_final_fetch_packet_bits_valid_bits_1,
                io_final_fetch_packet_bits_valid_bits_2,
                io_final_fetch_packet_bits_valid_bits_3,
  output [31:0] io_final_fetch_packet_bits_instructions_0_instruction,
  output [3:0]  io_final_fetch_packet_bits_instructions_0_packet_index,
  output [5:0]  io_final_fetch_packet_bits_instructions_0_ROB_index,
  output [31:0] io_final_fetch_packet_bits_instructions_1_instruction,
  output [3:0]  io_final_fetch_packet_bits_instructions_1_packet_index,
  output [5:0]  io_final_fetch_packet_bits_instructions_1_ROB_index,
  output [31:0] io_final_fetch_packet_bits_instructions_2_instruction,
  output [3:0]  io_final_fetch_packet_bits_instructions_2_packet_index,
  output [5:0]  io_final_fetch_packet_bits_instructions_2_ROB_index,
  output [31:0] io_final_fetch_packet_bits_instructions_3_instruction,
  output [3:0]  io_final_fetch_packet_bits_instructions_3_packet_index,
  output [5:0]  io_final_fetch_packet_bits_instructions_3_ROB_index,
  output [31:0] io_RAS_update_call_addr,
  output        io_RAS_update_call,
                io_RAS_update_ret,
  input         io_predictions_ready,
  output        io_predictions_valid,
                io_predictions_bits_valid,
  output [31:0] io_predictions_bits_fetch_PC,
  output        io_predictions_bits_is_misprediction,
  output [31:0] io_predictions_bits_predicted_PC,
  output        io_predictions_bits_T_NT,
  output [2:0]  io_predictions_bits_br_type,
  output [15:0] io_predictions_bits_GHR,
  output [6:0]  io_predictions_bits_NEXT,
                io_predictions_bits_TOS,
  output [1:0]  io_predictions_bits_dominant_index,
  output [31:0] io_predictions_bits_resolved_PC
);

  wire [31:0] PC_expected;
  wire [3:0]  _decoder_validator_io_instruction_validity;
  wire        _decoders_3_io_T_NT;
  wire [2:0]  _decoders_3_io_metadata_br_type;
  wire [31:0] _decoders_3_io_metadata_Imm;
  wire [31:0] _decoders_3_io_metadata_instruction_PC;
  wire [31:0] _decoders_3_io_metadata_RAS;
  wire [31:0] _decoders_3_io_metadata_BTB_target;
  wire        _decoders_2_io_T_NT;
  wire [2:0]  _decoders_2_io_metadata_br_type;
  wire [31:0] _decoders_2_io_metadata_Imm;
  wire [31:0] _decoders_2_io_metadata_instruction_PC;
  wire [31:0] _decoders_2_io_metadata_RAS;
  wire [31:0] _decoders_2_io_metadata_BTB_target;
  wire        _decoders_1_io_T_NT;
  wire [2:0]  _decoders_1_io_metadata_br_type;
  wire [31:0] _decoders_1_io_metadata_Imm;
  wire [31:0] _decoders_1_io_metadata_instruction_PC;
  wire [31:0] _decoders_1_io_metadata_RAS;
  wire [31:0] _decoders_1_io_metadata_BTB_target;
  wire        _decoders_0_io_T_NT;
  wire [2:0]  _decoders_0_io_metadata_br_type;
  wire [31:0] _decoders_0_io_metadata_Imm;
  wire [31:0] _decoders_0_io_metadata_instruction_PC;
  wire [31:0] _decoders_0_io_metadata_RAS;
  wire [31:0] _decoders_0_io_metadata_BTB_target;
  wire        inputs_valid = io_fetch_packet_valid & io_prediction_valid;
  reg  [2:0]  metadata_reg_0_br_type;
  reg  [31:0] metadata_reg_0_Imm;
  reg  [31:0] metadata_reg_0_instruction_PC;
  reg  [31:0] metadata_reg_0_RAS;
  reg  [31:0] metadata_reg_0_BTB_target;
  reg  [2:0]  metadata_reg_1_br_type;
  reg  [31:0] metadata_reg_1_Imm;
  reg  [31:0] metadata_reg_1_instruction_PC;
  reg  [31:0] metadata_reg_1_RAS;
  reg  [31:0] metadata_reg_1_BTB_target;
  reg  [2:0]  metadata_reg_2_br_type;
  reg  [31:0] metadata_reg_2_Imm;
  reg  [31:0] metadata_reg_2_instruction_PC;
  reg  [31:0] metadata_reg_2_RAS;
  reg  [31:0] metadata_reg_2_BTB_target;
  reg  [2:0]  metadata_reg_3_br_type;
  reg  [31:0] metadata_reg_3_Imm;
  reg  [31:0] metadata_reg_3_instruction_PC;
  reg  [31:0] metadata_reg_3_RAS;
  reg  [31:0] metadata_reg_3_BTB_target;
  reg         T_NT_reg_0;
  reg         T_NT_reg_1;
  reg         T_NT_reg_2;
  reg         T_NT_reg_3;
  wire [2:0]  metadata_out_br_type =
    T_NT_reg_0
      ? metadata_reg_0_br_type
      : T_NT_reg_1
          ? metadata_reg_1_br_type
          : T_NT_reg_2
              ? metadata_reg_2_br_type
              : T_NT_reg_3 ? metadata_reg_3_br_type : 3'h0;
  wire [31:0] metadata_out_instruction_PC =
    T_NT_reg_0
      ? metadata_reg_0_instruction_PC
      : T_NT_reg_1
          ? metadata_reg_1_instruction_PC
          : T_NT_reg_2
              ? metadata_reg_2_instruction_PC
              : T_NT_reg_3 ? metadata_reg_3_instruction_PC : 32'h0;
  reg  [31:0] PC_next_reg;
  wire        PC_mismatch = PC_expected != io_fetch_packet_bits_fetch_PC & inputs_valid;
  reg  [15:0] GHR;
  wire        has_control =
    metadata_reg_3_br_type == 3'h1 | metadata_reg_3_br_type == 3'h2
    | metadata_reg_3_br_type == 3'h3 | metadata_reg_3_br_type == 3'h5
    | metadata_reg_3_br_type == 3'h4 | metadata_reg_2_br_type == 3'h1
    | metadata_reg_2_br_type == 3'h2 | metadata_reg_2_br_type == 3'h3
    | metadata_reg_2_br_type == 3'h5 | metadata_reg_2_br_type == 3'h4
    | metadata_reg_1_br_type == 3'h1 | metadata_reg_1_br_type == 3'h2
    | metadata_reg_1_br_type == 3'h3 | metadata_reg_1_br_type == 3'h5
    | metadata_reg_1_br_type == 3'h4 | metadata_reg_0_br_type == 3'h1
    | metadata_reg_0_br_type == 3'h2 | metadata_reg_0_br_type == 3'h3
    | metadata_reg_0_br_type == 3'h5 | metadata_reg_0_br_type == 3'h4;
  wire [15:0] _GEN = {GHR[14:0], |{T_NT_reg_3, T_NT_reg_2, T_NT_reg_1, T_NT_reg_0}};
  wire        use_RAS = metadata_out_br_type == 3'h4;
  reg  [31:0] PC_next_REG;
  wire [31:0] PC_next =
    metadata_out_br_type == 3'h3 & metadata_out_br_type != 3'h4
      ? (T_NT_reg_0
           ? metadata_reg_0_BTB_target
           : T_NT_reg_1
               ? metadata_reg_1_BTB_target
               : T_NT_reg_2
                   ? metadata_reg_2_BTB_target
                   : T_NT_reg_3 ? metadata_reg_3_BTB_target : 32'h0)
      : use_RAS
          ? (T_NT_reg_0
               ? metadata_reg_0_RAS
               : T_NT_reg_1
                   ? metadata_reg_1_RAS
                   : T_NT_reg_2
                       ? metadata_reg_2_RAS
                       : T_NT_reg_3 ? metadata_reg_3_RAS : 32'h0)
          : metadata_out_br_type == 3'h1 | metadata_out_br_type == 3'h2
              ? metadata_out_instruction_PC
                + (T_NT_reg_0
                     ? metadata_reg_0_Imm
                     : T_NT_reg_1
                         ? metadata_reg_1_Imm
                         : T_NT_reg_2
                             ? metadata_reg_2_Imm
                             : T_NT_reg_3 ? metadata_reg_3_Imm : 32'h0)
              : PC_next_REG;
  reg         PC_next_reg_REG;
  reg         PC_expected_REG;
  assign PC_expected = PC_expected_REG ? PC_next : PC_next_reg;
  wire [3:0]  T_NT_mask =
    {_decoders_3_io_T_NT, _decoders_2_io_T_NT, _decoders_1_io_T_NT, _decoders_0_io_T_NT};
  reg  [31:0] io_final_fetch_packet_bits_instructions_0_REG_instruction;
  reg  [3:0]  io_final_fetch_packet_bits_instructions_0_REG_packet_index;
  reg  [5:0]  io_final_fetch_packet_bits_instructions_0_REG_ROB_index;
  reg         io_final_fetch_packet_bits_valid_bits_0_REG;
  reg         io_final_fetch_packet_bits_valid_bits_0_REG_1;
  wire        io_final_fetch_packet_bits_valid_bits_0_0 =
    io_final_fetch_packet_bits_valid_bits_0_REG
    & io_final_fetch_packet_bits_valid_bits_0_REG_1;
  reg  [31:0] io_final_fetch_packet_bits_instructions_1_REG_instruction;
  reg  [3:0]  io_final_fetch_packet_bits_instructions_1_REG_packet_index;
  reg  [5:0]  io_final_fetch_packet_bits_instructions_1_REG_ROB_index;
  reg         io_final_fetch_packet_bits_valid_bits_1_REG;
  reg         io_final_fetch_packet_bits_valid_bits_1_REG_1;
  wire        io_final_fetch_packet_bits_valid_bits_1_0 =
    io_final_fetch_packet_bits_valid_bits_1_REG
    & io_final_fetch_packet_bits_valid_bits_1_REG_1;
  reg  [31:0] io_final_fetch_packet_bits_instructions_2_REG_instruction;
  reg  [3:0]  io_final_fetch_packet_bits_instructions_2_REG_packet_index;
  reg  [5:0]  io_final_fetch_packet_bits_instructions_2_REG_ROB_index;
  reg         io_final_fetch_packet_bits_valid_bits_2_REG;
  reg         io_final_fetch_packet_bits_valid_bits_2_REG_1;
  wire        io_final_fetch_packet_bits_valid_bits_2_0 =
    io_final_fetch_packet_bits_valid_bits_2_REG
    & io_final_fetch_packet_bits_valid_bits_2_REG_1;
  reg  [31:0] io_final_fetch_packet_bits_instructions_3_REG_instruction;
  reg  [3:0]  io_final_fetch_packet_bits_instructions_3_REG_packet_index;
  reg  [5:0]  io_final_fetch_packet_bits_instructions_3_REG_ROB_index;
  reg         io_final_fetch_packet_bits_valid_bits_3_REG;
  reg         io_final_fetch_packet_bits_valid_bits_3_REG_1;
  wire        io_final_fetch_packet_bits_valid_bits_3_0 =
    io_final_fetch_packet_bits_valid_bits_3_REG
    & io_final_fetch_packet_bits_valid_bits_3_REG_1;
  reg  [31:0] io_predictions_bits_fetch_PC_REG;
  reg  [6:0]  io_predictions_bits_NEXT_REG;
  reg  [6:0]  io_predictions_bits_TOS_REG;
  reg  [31:0] io_predictions_bits_resolved_PC_REG;
  reg         io_predictions_bits_T_NT_REG;
  wire        _io_fetch_packet_ready_T =
    io_final_fetch_packet_ready & io_predictions_ready;
  reg         io_final_fetch_packet_valid_REG;
  always @(posedge clock) begin
    automatic logic stage_1_valid = io_fetch_packet_valid & ~PC_mismatch;
    metadata_reg_0_br_type <= _decoders_0_io_metadata_br_type;
    metadata_reg_0_Imm <= _decoders_0_io_metadata_Imm;
    metadata_reg_0_instruction_PC <= _decoders_0_io_metadata_instruction_PC;
    metadata_reg_0_RAS <= _decoders_0_io_metadata_RAS;
    metadata_reg_0_BTB_target <= _decoders_0_io_metadata_BTB_target;
    metadata_reg_1_br_type <= _decoders_1_io_metadata_br_type;
    metadata_reg_1_Imm <= _decoders_1_io_metadata_Imm;
    metadata_reg_1_instruction_PC <= _decoders_1_io_metadata_instruction_PC;
    metadata_reg_1_RAS <= _decoders_1_io_metadata_RAS;
    metadata_reg_1_BTB_target <= _decoders_1_io_metadata_BTB_target;
    metadata_reg_2_br_type <= _decoders_2_io_metadata_br_type;
    metadata_reg_2_Imm <= _decoders_2_io_metadata_Imm;
    metadata_reg_2_instruction_PC <= _decoders_2_io_metadata_instruction_PC;
    metadata_reg_2_RAS <= _decoders_2_io_metadata_RAS;
    metadata_reg_2_BTB_target <= _decoders_2_io_metadata_BTB_target;
    metadata_reg_3_br_type <= _decoders_3_io_metadata_br_type;
    metadata_reg_3_Imm <= _decoders_3_io_metadata_Imm;
    metadata_reg_3_instruction_PC <= _decoders_3_io_metadata_instruction_PC;
    metadata_reg_3_RAS <= _decoders_3_io_metadata_RAS;
    metadata_reg_3_BTB_target <= _decoders_3_io_metadata_BTB_target;
    T_NT_reg_0 <= _decoders_0_io_T_NT;
    T_NT_reg_1 <= _decoders_1_io_T_NT;
    T_NT_reg_2 <= _decoders_2_io_T_NT;
    T_NT_reg_3 <= _decoders_3_io_T_NT;
    PC_next_REG <= io_fetch_packet_bits_fetch_PC + 32'h10;
    PC_next_reg_REG <= stage_1_valid;
    PC_expected_REG <= stage_1_valid;
    io_final_fetch_packet_bits_instructions_0_REG_instruction <=
      io_fetch_packet_bits_instructions_0_instruction;
    io_final_fetch_packet_bits_instructions_0_REG_packet_index <=
      io_fetch_packet_bits_instructions_0_packet_index;
    io_final_fetch_packet_bits_instructions_0_REG_ROB_index <=
      io_fetch_packet_bits_instructions_0_ROB_index;
    io_final_fetch_packet_bits_valid_bits_0_REG <=
      _decoder_validator_io_instruction_validity[0];
    io_final_fetch_packet_bits_valid_bits_0_REG_1 <= inputs_valid;
    io_final_fetch_packet_bits_instructions_1_REG_instruction <=
      io_fetch_packet_bits_instructions_1_instruction;
    io_final_fetch_packet_bits_instructions_1_REG_packet_index <=
      io_fetch_packet_bits_instructions_1_packet_index;
    io_final_fetch_packet_bits_instructions_1_REG_ROB_index <=
      io_fetch_packet_bits_instructions_1_ROB_index;
    io_final_fetch_packet_bits_valid_bits_1_REG <=
      _decoder_validator_io_instruction_validity[1];
    io_final_fetch_packet_bits_valid_bits_1_REG_1 <= inputs_valid;
    io_final_fetch_packet_bits_instructions_2_REG_instruction <=
      io_fetch_packet_bits_instructions_2_instruction;
    io_final_fetch_packet_bits_instructions_2_REG_packet_index <=
      io_fetch_packet_bits_instructions_2_packet_index;
    io_final_fetch_packet_bits_instructions_2_REG_ROB_index <=
      io_fetch_packet_bits_instructions_2_ROB_index;
    io_final_fetch_packet_bits_valid_bits_2_REG <=
      _decoder_validator_io_instruction_validity[2];
    io_final_fetch_packet_bits_valid_bits_2_REG_1 <= inputs_valid;
    io_final_fetch_packet_bits_instructions_3_REG_instruction <=
      io_fetch_packet_bits_instructions_3_instruction;
    io_final_fetch_packet_bits_instructions_3_REG_packet_index <=
      io_fetch_packet_bits_instructions_3_packet_index;
    io_final_fetch_packet_bits_instructions_3_REG_ROB_index <=
      io_fetch_packet_bits_instructions_3_ROB_index;
    io_final_fetch_packet_bits_valid_bits_3_REG <=
      _decoder_validator_io_instruction_validity[3];
    io_final_fetch_packet_bits_valid_bits_3_REG_1 <= inputs_valid;
    io_predictions_bits_fetch_PC_REG <= io_fetch_packet_bits_fetch_PC;
    io_predictions_bits_NEXT_REG <= io_RAS_read_NEXT;
    io_predictions_bits_TOS_REG <= io_RAS_read_TOS;
    io_predictions_bits_resolved_PC_REG <= io_fetch_packet_bits_fetch_PC;
    io_predictions_bits_T_NT_REG <= |T_NT_mask;
    io_final_fetch_packet_valid_REG <=
      inputs_valid & PC_expected == io_fetch_packet_bits_fetch_PC;
    if (reset) begin
      PC_next_reg <= 32'h0;
      GHR <= 16'h0;
    end
    else begin
      if (PC_next_reg_REG)
        PC_next_reg <= PC_next;
      if (io_commit_is_misprediction)
        GHR <= io_commit_GHR;
      else if (has_control)
        GHR <= _GEN;
    end
  end // always @(posedge)
  branch_decoder decoders_0 (
    .clock                      (clock),
    .reset                      (reset),
    .io_fetch_PC                (io_fetch_packet_bits_fetch_PC),
    .io_instruction             (io_fetch_packet_bits_instructions_0_instruction),
    .io_valid                   (io_fetch_packet_bits_valid_bits_0),
    .io_prediction_bits_hit     (io_prediction_bits_hit),
    .io_prediction_bits_target  (io_prediction_bits_target),
    .io_prediction_bits_br_mask (io_prediction_bits_br_mask),
    .io_prediction_bits_T_NT    (io_prediction_bits_T_NT),
    .io_RAS_read_ret_addr       (io_RAS_read_ret_addr),
    .io_T_NT                    (_decoders_0_io_T_NT),
    .io_metadata_br_type        (_decoders_0_io_metadata_br_type),
    .io_metadata_Imm            (_decoders_0_io_metadata_Imm),
    .io_metadata_instruction_PC (_decoders_0_io_metadata_instruction_PC),
    .io_metadata_RAS            (_decoders_0_io_metadata_RAS),
    .io_metadata_BTB_target     (_decoders_0_io_metadata_BTB_target)
  );
  branch_decoder_1 decoders_1 (
    .clock                      (clock),
    .reset                      (reset),
    .io_fetch_PC                (io_fetch_packet_bits_fetch_PC),
    .io_instruction             (io_fetch_packet_bits_instructions_1_instruction),
    .io_valid                   (io_fetch_packet_bits_valid_bits_1),
    .io_prediction_bits_hit     (io_prediction_bits_hit),
    .io_prediction_bits_target  (io_prediction_bits_target),
    .io_prediction_bits_br_mask (io_prediction_bits_br_mask),
    .io_prediction_bits_T_NT    (io_prediction_bits_T_NT),
    .io_RAS_read_ret_addr       (io_RAS_read_ret_addr),
    .io_T_NT                    (_decoders_1_io_T_NT),
    .io_metadata_br_type        (_decoders_1_io_metadata_br_type),
    .io_metadata_Imm            (_decoders_1_io_metadata_Imm),
    .io_metadata_instruction_PC (_decoders_1_io_metadata_instruction_PC),
    .io_metadata_RAS            (_decoders_1_io_metadata_RAS),
    .io_metadata_BTB_target     (_decoders_1_io_metadata_BTB_target)
  );
  branch_decoder_2 decoders_2 (
    .clock                      (clock),
    .reset                      (reset),
    .io_fetch_PC                (io_fetch_packet_bits_fetch_PC),
    .io_instruction             (io_fetch_packet_bits_instructions_2_instruction),
    .io_valid                   (io_fetch_packet_bits_valid_bits_2),
    .io_prediction_bits_hit     (io_prediction_bits_hit),
    .io_prediction_bits_target  (io_prediction_bits_target),
    .io_prediction_bits_br_mask (io_prediction_bits_br_mask),
    .io_prediction_bits_T_NT    (io_prediction_bits_T_NT),
    .io_RAS_read_ret_addr       (io_RAS_read_ret_addr),
    .io_T_NT                    (_decoders_2_io_T_NT),
    .io_metadata_br_type        (_decoders_2_io_metadata_br_type),
    .io_metadata_Imm            (_decoders_2_io_metadata_Imm),
    .io_metadata_instruction_PC (_decoders_2_io_metadata_instruction_PC),
    .io_metadata_RAS            (_decoders_2_io_metadata_RAS),
    .io_metadata_BTB_target     (_decoders_2_io_metadata_BTB_target)
  );
  branch_decoder_3 decoders_3 (
    .clock                      (clock),
    .reset                      (reset),
    .io_fetch_PC                (io_fetch_packet_bits_fetch_PC),
    .io_instruction             (io_fetch_packet_bits_instructions_3_instruction),
    .io_valid                   (io_fetch_packet_bits_valid_bits_3),
    .io_prediction_bits_hit     (io_prediction_bits_hit),
    .io_prediction_bits_target  (io_prediction_bits_target),
    .io_prediction_bits_br_mask (io_prediction_bits_br_mask),
    .io_prediction_bits_T_NT    (io_prediction_bits_T_NT),
    .io_RAS_read_ret_addr       (io_RAS_read_ret_addr),
    .io_T_NT                    (_decoders_3_io_T_NT),
    .io_metadata_br_type        (_decoders_3_io_metadata_br_type),
    .io_metadata_Imm            (_decoders_3_io_metadata_Imm),
    .io_metadata_instruction_PC (_decoders_3_io_metadata_instruction_PC),
    .io_metadata_RAS            (_decoders_3_io_metadata_RAS),
    .io_metadata_BTB_target     (_decoders_3_io_metadata_BTB_target)
  );
  decoder_validator decoder_validator (
    .io_instruction_T_NT_mask (T_NT_mask),
    .io_instruction_validity  (_decoder_validator_io_instruction_validity)
  );
  assign io_prediction_ready = _io_fetch_packet_ready_T & ~PC_mismatch;
  assign io_fetch_packet_ready = _io_fetch_packet_ready_T & ~PC_mismatch;
  assign io_revert_valid = PC_mismatch;
  assign io_revert_bits_GHR = 16'h0;
  assign io_revert_bits_PC = PC_expected;
  assign io_GHR = has_control ? _GEN : GHR;
  assign io_final_fetch_packet_valid = io_final_fetch_packet_valid_REG;
  assign io_final_fetch_packet_bits_fetch_PC = io_fetch_packet_bits_fetch_PC;
  assign io_final_fetch_packet_bits_valid_bits_0 =
    io_final_fetch_packet_bits_valid_bits_0_0;
  assign io_final_fetch_packet_bits_valid_bits_1 =
    io_final_fetch_packet_bits_valid_bits_1_0;
  assign io_final_fetch_packet_bits_valid_bits_2 =
    io_final_fetch_packet_bits_valid_bits_2_0;
  assign io_final_fetch_packet_bits_valid_bits_3 =
    io_final_fetch_packet_bits_valid_bits_3_0;
  assign io_final_fetch_packet_bits_instructions_0_instruction =
    io_final_fetch_packet_bits_instructions_0_REG_instruction;
  assign io_final_fetch_packet_bits_instructions_0_packet_index =
    io_final_fetch_packet_bits_instructions_0_REG_packet_index;
  assign io_final_fetch_packet_bits_instructions_0_ROB_index =
    io_final_fetch_packet_bits_instructions_0_REG_ROB_index;
  assign io_final_fetch_packet_bits_instructions_1_instruction =
    io_final_fetch_packet_bits_instructions_1_REG_instruction;
  assign io_final_fetch_packet_bits_instructions_1_packet_index =
    io_final_fetch_packet_bits_instructions_1_REG_packet_index;
  assign io_final_fetch_packet_bits_instructions_1_ROB_index =
    io_final_fetch_packet_bits_instructions_1_REG_ROB_index;
  assign io_final_fetch_packet_bits_instructions_2_instruction =
    io_final_fetch_packet_bits_instructions_2_REG_instruction;
  assign io_final_fetch_packet_bits_instructions_2_packet_index =
    io_final_fetch_packet_bits_instructions_2_REG_packet_index;
  assign io_final_fetch_packet_bits_instructions_2_ROB_index =
    io_final_fetch_packet_bits_instructions_2_REG_ROB_index;
  assign io_final_fetch_packet_bits_instructions_3_instruction =
    io_final_fetch_packet_bits_instructions_3_REG_instruction;
  assign io_final_fetch_packet_bits_instructions_3_packet_index =
    io_final_fetch_packet_bits_instructions_3_REG_packet_index;
  assign io_final_fetch_packet_bits_instructions_3_ROB_index =
    io_final_fetch_packet_bits_instructions_3_REG_ROB_index;
  assign io_RAS_update_call_addr = metadata_out_instruction_PC;
  assign io_RAS_update_call = metadata_out_br_type == 3'h5;
  assign io_RAS_update_ret = use_RAS;
  assign io_predictions_valid =
    (|metadata_reg_3_br_type) & io_final_fetch_packet_bits_valid_bits_3_0
    | (|metadata_reg_2_br_type) & io_final_fetch_packet_bits_valid_bits_2_0
    | (|metadata_reg_1_br_type) & io_final_fetch_packet_bits_valid_bits_1_0
    | (|metadata_reg_0_br_type) & io_final_fetch_packet_bits_valid_bits_0_0;
  assign io_predictions_bits_valid = 1'h0;
  assign io_predictions_bits_fetch_PC = io_predictions_bits_fetch_PC_REG;
  assign io_predictions_bits_is_misprediction = 1'h0;
  assign io_predictions_bits_predicted_PC = PC_expected;
  assign io_predictions_bits_T_NT = io_predictions_bits_T_NT_REG;
  assign io_predictions_bits_br_type = metadata_out_br_type;
  assign io_predictions_bits_GHR = 16'h0;
  assign io_predictions_bits_NEXT = io_predictions_bits_NEXT_REG;
  assign io_predictions_bits_TOS = io_predictions_bits_TOS_REG;
  assign io_predictions_bits_dominant_index = 2'h0;
  assign io_predictions_bits_resolved_PC = io_predictions_bits_resolved_PC_REG + 32'h10;
endmodule

