# ChaosCore


### What is ChaosCore?

ChaosCore is an Out-of-Order RV32G core aimed at exploring the tradeoffs resulting from various security and performance considerations. ChaosCore is also designed to run out of the box and includes a slew of benchmarks and tests for demonstration and analysis. 

### Directories

```cocotb``` contains "designer" tests intended for debugging. It also currently integrates cocotb-axi for verification using open source complaince tests and benchmarks, such as riscv-test and Coremark.

```tb``` contains robust verification of larger core components. This includes discrete cache UVM testbenches, and will eventually include a UVM tb for lockstep with spike. 

```doc``` the just-the-docs directory. 

```hw``` contains the design files. The ```chisel``` sub-folder contains the chisel code. The ```verilog``` sub-folder contains both the auto-generated verilog files as well as some open source Verilog IP submodules, such as verilog-AXI for interconnect components. 

```py``` contains related python files, libraries, models, and utils used for both the design and verification. 


# Requirements 

It is assumed that the following tools have already been installed. The versions for Verilator and Chisel are a requirement.

1) Verilator 5.024
2) Chisel 6.0
3) Python3

All other requirements are included as part of the setup process for this repository.

# Setup

This repository contains several external dependencies. Currently, these are riscv-tests and verilog-axi. As such, please run `git submodule update --init --recursive` to clone these submodules before proceeding.

## Python venv

This repo uses python for generating interconnect and simulation, among other things. Consequenrly, a Python venv is used to contain and manage dependancies. 

To setup a python venv, run:

```
python3 -m venv venv
```

Then install the required libraries in this venv:

```
pip3 install -r requirements.txt
```

# Installing RISCV GNU:

This repository provides pre-compiled binaries to run a simulation of the SoC without the overhead of setting up and installing a RISCV toolchain. Feel free to skip this step if you do not anticipate compiling custom binaries for ChaosCore.

To build RISCV-GNU, run the following commands: 
```
sudo apt-get install autoconf automake autotools-dev curl python3 python3-pip libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev ninja-build git cmake libglib2.0-dev libslirp-dev

git clone https://github.com/riscv-collab/riscv-gnu-toolchain
cd riscv-gnu-toolchain
./configure --prefix=/opt/riscv --with-arch=rv32gc_zicsr_zifencei --with-abi=ilp32 --enable-multilib
sudo make -j12
```
then add 
```
export PATH="$PATH:/opt/riscv/bin"
```
to your .bashrc

# Installing SPIKE

TODO


# Generating ChaosCore

1) generating the core itself based on params

2) Generating the interconnect (fix?)

3) Generating the SoC


# Running a Simulation


...



# Suggestions to Devs
1) Set vscode to ignore everything in .gitignore (way too many junk files are generated by all the tools for the repo to be managable without hiding some)



